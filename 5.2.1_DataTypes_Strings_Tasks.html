<!DOCTYPE html>
<html>

<head>
    <script>
        /* Task 1
        Uppercase the first character
        importance: 5
        Write a function ucFirst(str) that returns the string str with the uppercased first character, for instance: 
        */
        function ucFirst(str) {
            alert(str[0].toUpperCase() + str.slice(1));
        }
        ucFirst("john") == "John";
        /* Task 2
        Check for spam
        importance: 5
        Write a function checkSpam(str) that returns true if str contains ‘viagra’ or ‘XXX’, otherwise false.

        The function must be case-insensitive:
        */
        function checkSpam(str) {
            lowstr = str.toLowerCase(); // we converted to lowercase for comparison
            if (lowstr.includes("viagra") || lowstr.includes("xxx"))
                alert(true);
            else alert(false);
        }
        checkSpam('buy ViAgRA now'); //== true
        checkSpam('free xxxxx'); //== true
        checkSpam("innocent rabbit"); //== false

        /* Task 3
        Truncate the text
        importance: 5
        Create a function truncate(str, maxlength) that checks the length of the str and, if it exceeds maxlength – replaces the end of str with the ellipsis character "…", to make its length equal to maxlength.

        The result of the function should be the truncated (if needed) string.

        For instance:
        */
        function truncate(str, maxlength) {
            if (str.length >= maxlength) { alert(str.slice(0, maxlength - 1) + "…"); }
            else
            { alert(str); }
        }
        truncate("What I'd like to tell on this topic is:", 20) //== "What I'd like to te…"

        truncate("Hi everyone!", 20) //== "Hi everyone!"

        /* Task 4
        Extract the money
        importance: 4
        We have a cost in the form "$120". That is: the dollar sign goes first, and then the number.

        Create a function extractCurrencyValue(str) that would extract the numeric value from such string and return it.

        The example:
        */
       function extractCurrencyValue(str)
       {
            return +str.slice(1); // use slice to get the rest of the string
       }
        alert( extractCurrencyValue('$120')); //=== 120 )


        //Brainstorming Tasks
       /* Task 5
        Email Validation: Create a function to validate if a string is valid email address or not, i.e., it should have one @ and atleast one '.' & 2 or 3 chars after last '.'.
       */
      function checkEmail(str)
      {
        if( str.includes('@') && str.includes('.'))
        {   
            let at,dot;
            at = countAt(str);
            console.log(at);
            function countAt(str)   {
            let pos = -1,i=0;
            while((pos = str.indexOf('@',pos+1)) != -1)
            {  i++; }  // counts @
            if(i > 1)  
            return false//alert('invalid @ count') 
            else 
            return true;//alert('valid @ count');
                                    }
            dot= countAfterDot(str);
            console.log(dot);
            function countAfterDot(str) {
            let lastdotpos= str.indexOf('.',-4);
           // alert(`last dot at: ${lastdotpos}`);
            if (str.slice(lastdotpos).length == 4 || str.slice(lastdotpos).length == 3)
            {   return true;//alert('valid char count after .'); 
            }
            else return false;//alert('invalid char count after .');
                                    }
            (at && dot) ? alert('valid email') : alert('invalid email');

        }
        else alert("invalid email");
      }
      let email =  prompt('Enter email:\n');
      checkEmail(email);

      /* Task 6
      Password Validator: Create a function to validate a password contains atleast one uppercase, one lowercase, one numeric and one symbol 
      */
     function passwordValidator(str)
     {
        let num=upp=low=sym=0;
        if( str.length != 8)
        {   alert("must be 8 characters");    } // length must be equal to 8 characters
        else
        {
            num = checkNumeric(str);            
            console.log(num);
            function checkNumeric(str)
            {
                for( let i = 48 ; i <= 57 ; i++)
                {
                    if(str.includes(String.fromCodePoint(i)))       //inc num if it contains a numeric
                    {
                        num++;
                    }
                }
                return num ? true : false;
            }
            upp = checkUpperCase(str);
            console.log(upp);
            function checkUpperCase(str)
            {
                for( let i = 65 ; i <= 90 ; i++)
                {   if(str.includes(String.fromCodePoint(i)))       //inc upp if it contains an uppercase character
                    {
                        upp++;
                    }
                }
                return upp ? true : false;
            }
                
            low = checkLowerCase(str);
            console.log(low);
            function checkLowerCase(str)
            {
                for( let i = 97 ; i <= 122 ; i++)
                {    if(str.includes(String.fromCodePoint(i)))          //inc low if it contains a lowercase character
                    {
                        low++;
                    }
                }
                return low ? true : false;
            }
            sym = checkSymbol(str);
            console.log(sym);
            function checkSymbol(str)
            {
                for( let i = 33 ; i <= 47 ; i++)
                {    if(str.includes(String.fromCodePoint(i)))          //inc sym if it contains a special character
                    {
                        sym++;
                    }
                }
                for( let i = 58 ; i <= 64 ; i++)
                {    if(str.includes(String.fromCodePoint(i)))
                    {
                        sym++;
                    }
                }
                return sym ? true : false;
            }
            (num && upp && low && sym) ?    //final check if it contains atleast one uppercase, one lowercase, one numeric and one special character
            alert('valid password') : 
            alert('must contain atleast one uppercase, one lowercase, one numeric and one special character');
        }
       
     }
     let pwd =  prompt('Enter password:\n');
      passwordValidator(pwd);
        /* Task 7
        Create a function that hides email address to prevent unauthorized access: e.g
        protectEmail(robin_singh@example.com) = "robin..@example.com"
        */
        email = prompt("Enter email:");
       protectEmail(email);
       function protectEmail()
       {
        alert(email.slice(0,5)+".."+email.slice(email.indexOf('@')));
       }
       /* Task 8
       Create a function to parameterize a string, e.g., 
       paramString("Robin from USA") = "robin_from_usa"
       */
      let pString = prompt("Enter a string to param:");
      paramString(pString);
      function paramString(pString)
      {
        pString = pString.toLowerCase();
        const myArray = pString.split(" ");
        alert(myArray);
        pString = "";
        for( let i = 0; i < myArray.length ; i++)
        { pString += myArray[i]+"-"; }
        alert(pString.slice(0,pString.length-1));
      }
      /* Task 9
      Create a function to split a string, e.g. 
      createChunks('w3resource',2) = ["w3", "re", "so", "ur", "ce"]
      */
     
      function createChunks(str, len)
      {
        let myArray=[];
        let start=0;
        for( let i=0; i < str.length/len; i++  )
        {   myArray[i] = str.substr(start,len);
            start += len;    
             console.log(myArray);        
        }
    }
    createChunks('w3resource',2);
    </script>
</head>

</html>